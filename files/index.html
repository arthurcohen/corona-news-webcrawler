<html>

<head>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.rawgit.com/abdennour/react-csv/6424b500/cdn/react-csv-latest.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js" type="text/javascript"></script>
    <script>
        $(document).ready( function () {
            if (window.File && window.FileReader && window.FileList && window.Blob) {
                // Read files

            document.getElementById("filetoRead").addEventListener("change",function(){
                var file = this.files[0];

                if (file) {
                    var reader = new FileReader();

                    reader.onload = function (evt) {
                        console.log(evt);
                        var news = $.csv.toObjects(evt.target.result);
                        var newsRows = [];
                        news.forEach(element => {
                            if(element.rank > 0 && element.read === 'false'){
                                newsRows.push([element.title, element.url, element.imageUrl, element.sourceName]);
                            }
                        });
                        $('#example').DataTable( {
                            data: newsRows,
                            columns: [
                                { title: "Title" },
                                { title: "Url" },
                                { title: "ImageURL" },
                                { title: "SourceName" }
                            ]
                        } );
                    };

                    reader.onerror = function (evt) {
                        console.error("An error ocurred reading the file",evt);
                    };

                    reader.readAsText(file, "UTF-8");
                    }
                },false);
            } else {
                alert('The File APIs are not fully supported by your browser.');
            }
        } );
    </script>
</head>


<body>
    <p>
        Select a file from your computer to being read as text.
       </p>
    <input type="file" id="filetoRead" />
    <table id="example" class="display" width="100%"></table>
</body>


</html>